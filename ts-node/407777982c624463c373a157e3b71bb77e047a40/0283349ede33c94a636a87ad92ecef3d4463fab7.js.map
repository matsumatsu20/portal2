{"version":3,"file":"/var/www/portal/webpack.config.ts","sources":["/var/www/portal/webpack.config.ts"],"names":[],"mappings":"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","sourcesContent":["var webpack = require('webpack');\nvar path = require('path');\nvar clone = require('js.clone');\nvar webpackMerge = require('webpack-merge');\nvar extractTextPlugin = require('extract-text-webpack-plugin');\n\nvar ENV = process.env.NODE_ENV === 'production' ? 'production' : 'development';\n\n// 環境変数がない場合は、現在時刻が開催時刻となり、終了時刻は7日後となる\nvar now = Date.now();\nvar START_DATE = isNaN(Date.parse(process.env.START_DATE)) ? new Date() : process.env.START_DATE;\nvar END_DATE = isNaN(Date.parse(process.env.END_DATE)) ? new Date(now + 7 * 24 * 60 * 60 * 1000) : process.env.END_DATE;\n\n\nexport var commonPlugins = [\n  new webpack.ContextReplacementPlugin(\n    // The (\\\\|\\/) piece accounts for path separators in *nix and Windows\n    /angular(\\\\|\\/)core(\\\\|\\/)src(\\\\|\\/)linker/,\n    root('./src'),\n    {\n      // your Angular Async Route paths relative to this root directory\n    }\n  ),\n\n  // Loader options\n  new webpack.LoaderOptionsPlugin({\n\n  }),\n\n  new webpack.DefinePlugin({\n    'process.env.NODE_ENV':  JSON.stringify(ENV),\n    'process.env.AOT': false,\n    'process.env.START_DATE': JSON.stringify(START_DATE),\n    'process.env.END_DATE': JSON.stringify(END_DATE),\n  }),\n\n];\n\nexport var commonConfig = {\n  devtool: 'source-map',\n  resolve: {\n    extensions: ['.ts', '.js', '.json'],\n    modules: [ root('node_modules') ]\n  },\n  context: __dirname,\n  output: {\n    publicPath: '',\n    filename: '[name].bundle.js'\n  },\n  module: {\n    rules: [\n      // TypeScript\n      { test: /\\.ts$/, use: ['awesome-typescript-loader', 'angular2-template-loader'] },\n      { test: /\\.html$/, use: 'raw-loader' },\n      { test: /\\.css$/, use: [\n        extractTextPlugin.extract({ fallbackLoader: 'style-loader', loader: 'css-loader' }),\n        'to-string-loader',\n        'css-loader'\n      ], include: [/node_modules/, /global.css/]},\n      { test: /\\.css$/, use: ['to-string-loader', 'css-loader'], exclude: [/node_modules/, /global.css/]},\n      { test: /\\.json$/, use: 'json-loader' }\n    ],\n  },\n  plugins: [\n    // Use commonPlugins.\n    new extractTextPlugin({ filename: 'styles.css', disable: false, allChunks: true })\n  ]\n\n};\n\n// Client.\nexport var clientPlugins = [\n\n];\n\nexport var clientConfig = {\n  target: 'web',\n  entry: './src/client',\n  output: {\n    path: root('dist/client')\n  },\n  node: {\n    global: true,\n    crypto: 'empty',\n    __dirname: true,\n    __filename: true,\n    process: true,\n    Buffer: false\n  },\n  module: {\n    rules: [\n      { test: require.resolve(\"material-design-lite/material\"), use: 'exports-loader?componentHandler' }\n    ],\n  },\n};\n\n// Server.\nexport var serverPlugins = [\n\n];\n\nexport var serverConfig = {\n  target: 'node',\n  entry: './src/server', // use the entry file of the node server if everything is ts rather than es5\n  output: {\n    path: root('dist/server'),\n    libraryTarget: 'commonjs2',\n    filename: 'index.js'\n  },\n\n\n  module: {\n    rules: [\n      { test: /@angular(\\\\|\\/)material/, use: 'imports-loader?window=>global' }\n    ],\n  },\n\n  externals: includeClientPackages(\n    /@angularclass|@angular|angular2-|ng2-|ng-|@ng-|angular-|@ngrx|ngrx-|@angular2|ionic|@ionic|-angular2|-ng2|-ng|-loader/\n  ),\n  node: {\n    global: true,\n    crypto: 'empty',\n    __dirname: true,\n    __filename: true,\n    process: true,\n    Buffer: true\n  }\n};\n\n\nexport default [\n  // Client\n  webpackMerge(clone(commonConfig), clientConfig, { plugins: clientPlugins.concat(commonPlugins) }),\n\n  // Server\n  webpackMerge(clone(commonConfig), serverConfig, { plugins: serverPlugins.concat(commonPlugins) })\n];\n\n\n// Helpers\nexport function includeClientPackages(packages, localModule?: string[]) {\n  return function(context, request, cb) {\n    if (localModule instanceof RegExp && localModule.test(request)) {\n      return cb();\n    }\n    if (packages instanceof RegExp && packages.test(request)) {\n      return cb();\n    }\n    if (Array.isArray(packages) && packages.indexOf(request) !== -1) {\n      return cb();\n    }\n    if (!path.isAbsolute(request) && request.charAt(0) !== '.') {\n      return cb(null, 'commonjs ' + request);\n    }\n    return cb();\n  };\n}\n\nexport function root(args) {\n  args = Array.prototype.slice.call(arguments, 0);\n  return path.join.apply(path, [__dirname].concat(args));\n}\n"]}